"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PurposeRestrictionVectorEncoder=void 0;var BitLength_js_1=require("../BitLength.js"),BooleanEncoder_js_1=require("./BooleanEncoder.js"),index_js_1=require("../../errors/index.js"),IntEncoder_js_1=require("./IntEncoder.js"),index_js_2=require("../../model/index.js"),PurposeRestrictionVectorEncoder=function(){function e(){}return e.decode=function(e){var t=0,n=new index_js_2.PurposeRestrictionVector,r=IntEncoder_js_1.IntEncoder.decode(e.substr(t,BitLength_js_1.BitLength.numRestrictions),BitLength_js_1.BitLength.numRestrictions);t+=BitLength_js_1.BitLength.numRestrictions;for(var o=0;o<r;o++){var i=IntEncoder_js_1.IntEncoder.decode(e.substr(t,BitLength_js_1.BitLength.purposeId),BitLength_js_1.BitLength.purposeId);t+=BitLength_js_1.BitLength.purposeId;var s=IntEncoder_js_1.IntEncoder.decode(e.substr(t,BitLength_js_1.BitLength.restrictionType),BitLength_js_1.BitLength.restrictionType);t+=BitLength_js_1.BitLength.restrictionType;var d=new index_js_2.PurposeRestriction(i,s),_=IntEncoder_js_1.IntEncoder.decode(e.substr(t,BitLength_js_1.BitLength.numEntries),BitLength_js_1.BitLength.numEntries);t+=BitLength_js_1.BitLength.numEntries;for(var c=0;c<_;c++){var B=BooleanEncoder_js_1.BooleanEncoder.decode(e.substr(t,BitLength_js_1.BitLength.anyBoolean));t+=BitLength_js_1.BitLength.anyBoolean;var g=IntEncoder_js_1.IntEncoder.decode(e.substr(t,BitLength_js_1.BitLength.vendorId),BitLength_js_1.BitLength.vendorId);if(t+=BitLength_js_1.BitLength.vendorId,B){var h=IntEncoder_js_1.IntEncoder.decode(e.substr(t,BitLength_js_1.BitLength.vendorId),BitLength_js_1.BitLength.vendorId);if(t+=BitLength_js_1.BitLength.vendorId,h<g)throw new index_js_1.DecodingError("Invalid RangeEntry: endVendorId ".concat(h," is less than ").concat(g));for(var L=g;L<=h;L++)n.add(L,d)}else n.add(g,d)}}return n.bitLength=t,n},e}();exports.PurposeRestrictionVectorEncoder=PurposeRestrictionVectorEncoder;